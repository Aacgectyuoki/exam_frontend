{"ast":null,"code":"import { __awaiter } from 'tslib';\nimport * as i0 from '@angular/core';\nimport { EventEmitter, forwardRef, Component, Input, Output, NgModule } from '@angular/core';\nimport { EditorWatchdog } from '@ckeditor/ckeditor5-watchdog';\nimport { first } from 'rxjs/operators';\nimport { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\n/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md.\r\n */\n// A copy of @ckeditor/ckeditor5-utils/src/uid.js\n// A hash table of hex numbers to avoid using toString() in uid() which is costly.\n// [ '00', '01', '02', ..., 'fe', 'ff' ]\n\nfunction CKEditorComponent_ng_template_0_Template(rf, ctx) {}\n\nconst HEX_NUMBERS = new Array(256).fill(0).map((val, index) => ('0' + index.toString(16)).slice(-2));\n/**\r\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\r\n * 32 alphanumeric characters.\r\n *\r\n * **Note**: The characters the unique id is built from correspond to the hex number notation\r\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\r\n * by 16 8-bit numbers next to each other.\r\n *\r\n * @returns An unique id string.\r\n */\n\nfunction uid() {\n  // Let's create some positive random 32bit integers first.\n  //\n  // 1. Math.random() is a float between 0 and 1.\n  // 2. 0x100000000 is 2^32 = 4294967296.\n  // 3. >>> 0 enforces integer (in JS all numbers are floating point).\n  //\n  // For instance:\n  //\t\tMath.random() * 0x100000000 = 3366450031.853859\n  // but\n  //\t\tMath.random() * 0x100000000 >>> 0 = 3366450031.\n  const r1 = Math.random() * 0x100000000 >>> 0;\n  const r2 = Math.random() * 0x100000000 >>> 0;\n  const r3 = Math.random() * 0x100000000 >>> 0;\n  const r4 = Math.random() * 0x100000000 >>> 0; // Make sure that id does not start with number.\n\n  return 'e' + HEX_NUMBERS[r1 >> 0 & 0xFF] + HEX_NUMBERS[r1 >> 8 & 0xFF] + HEX_NUMBERS[r1 >> 16 & 0xFF] + HEX_NUMBERS[r1 >> 24 & 0xFF] + HEX_NUMBERS[r2 >> 0 & 0xFF] + HEX_NUMBERS[r2 >> 8 & 0xFF] + HEX_NUMBERS[r2 >> 16 & 0xFF] + HEX_NUMBERS[r2 >> 24 & 0xFF] + HEX_NUMBERS[r3 >> 0 & 0xFF] + HEX_NUMBERS[r3 >> 8 & 0xFF] + HEX_NUMBERS[r3 >> 16 & 0xFF] + HEX_NUMBERS[r3 >> 24 & 0xFF] + HEX_NUMBERS[r4 >> 0 & 0xFF] + HEX_NUMBERS[r4 >> 8 & 0xFF] + HEX_NUMBERS[r4 >> 16 & 0xFF] + HEX_NUMBERS[r4 >> 24 & 0xFF];\n}\n\nconst ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID = 'Lock from Angular integration (@ckeditor/ckeditor5-angular)';\n\nclass CKEditorComponent {\n  constructor(elementRef, ngZone) {\n    /**\r\n     * The configuration of the editor.\r\n     * See https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editorconfig-EditorConfig.html\r\n     * to learn more.\r\n     */\n    this.config = {};\n    /**\r\n     * The initial data of the editor. Useful when not using the ngModel.\r\n     * See https://angular.io/api/forms/NgModel to learn more.\r\n     */\n\n    this.data = '';\n    /**\r\n     * Tag name of the editor component.\r\n     *\r\n     * The default tag is 'div'.\r\n     */\n\n    this.tagName = 'div';\n    /**\r\n     * Allows disabling the two-way data binding mechanism. Disabling it can boost performance for large documents.\r\n     *\r\n     * When a component is connected using the [(ngModel)] or [formControl] directives and this value is set to true then none of the data\r\n     * will ever be synchronized.\r\n     *\r\n     * An integrator must call `editor.data.get()` manually once the application needs the editor's data.\r\n     * An editor instance can be received in the `ready()` callback.\r\n     */\n\n    this.disableTwoWayDataBinding = false;\n    /**\r\n     * Fires when the editor is ready. It corresponds with the `editor#ready`\r\n     * https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html#event-ready\r\n     * event.\r\n     */\n\n    this.ready = new EventEmitter();\n    /**\r\n     * Fires when the content of the editor has changed. It corresponds with the `editor.model.document#change`\r\n     * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_document-Document.html#event-change\r\n     * event.\r\n     */\n\n    this.change = new EventEmitter();\n    /**\r\n     * Fires when the editing view of the editor is blurred. It corresponds with the `editor.editing.view.document#blur`\r\n     * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_document-Document.html#event-event:blur\r\n     * event.\r\n     */\n\n    this.blur = new EventEmitter();\n    /**\r\n     * Fires when the editing view of the editor is focused. It corresponds with the `editor.editing.view.document#focus`\r\n     * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_document-Document.html#event-event:focus\r\n     * event.\r\n     */\n\n    this.focus = new EventEmitter();\n    /**\r\n     * Fires when the editor component crashes.\r\n     */\n\n    this.error = new EventEmitter();\n    /**\r\n     * If the component is read–only before the editor instance is created, it remembers that state,\r\n     * so the editor can become read–only once it is ready.\r\n     */\n\n    this.initiallyDisabled = false;\n    /**\r\n     * A lock flag preventing from calling the `cvaOnChange()` during setting editor data.\r\n     */\n\n    this.isEditorSettingData = false;\n    this.id = uid();\n    this.ngZone = ngZone;\n    this.elementRef = elementRef; // To avoid issues with the community typings and CKEditor 5, let's treat window as any. See #342.\n\n    const {\n      CKEDITOR_VERSION\n    } = window;\n\n    if (CKEDITOR_VERSION) {\n      const [major] = CKEDITOR_VERSION.split('.').map(Number);\n\n      if (major < 37) {\n        console.warn('The <CKEditor> component requires using CKEditor 5 in version 37 or higher.');\n      }\n    } else {\n      console.warn('Cannot find the \"CKEDITOR_VERSION\" in the \"window\" scope.');\n    }\n  }\n  /**\r\n   * When set `true`, the editor becomes read-only.\r\n   * See https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html#member-isReadOnly\r\n   * to learn more.\r\n   */\n\n\n  set disabled(isDisabled) {\n    this.setDisabledState(isDisabled);\n  }\n\n  get disabled() {\n    if (this.editorInstance) {\n      return this.editorInstance.isReadOnly;\n    }\n\n    return this.initiallyDisabled;\n  }\n  /**\r\n   * The instance of the editor created by this component.\r\n   */\n\n\n  get editorInstance() {\n    let editorWatchdog = this.editorWatchdog;\n\n    if (this.watchdog) {\n      // Temporarily use the `_watchdogs` internal map as the `getItem()` method throws\n      // an error when the item is not registered yet.\n      // See https://github.com/ckeditor/ckeditor5-angular/issues/177.\n      // TODO should be able to change when new chages in Watcdog are released.\n      editorWatchdog = this.watchdog._watchdogs.get(this.id);\n    }\n\n    if (editorWatchdog) {\n      return editorWatchdog.editor;\n    }\n\n    return null;\n  }\n\n  getId() {\n    return this.id;\n  } // Implementing the OnChanges interface. Whenever the `data` property is changed, update the editor content.\n\n\n  ngOnChanges(changes) {\n    if (Object.prototype.hasOwnProperty.call(changes, 'data') && changes.data && !changes.data.isFirstChange()) {\n      this.writeValue(changes.data.currentValue);\n    }\n  } // Implementing the AfterViewInit interface.\n\n\n  ngAfterViewInit() {\n    this.attachToWatchdog();\n  } // Implementing the OnDestroy interface.\n\n\n  ngOnDestroy() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.watchdog) {\n        yield this.watchdog.remove(this.id);\n      } else if (this.editorWatchdog && this.editorWatchdog.editor) {\n        yield this.editorWatchdog.destroy();\n        this.editorWatchdog = undefined;\n      }\n    });\n  } // Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\n\n  writeValue(value) {\n    // This method is called with the `null` value when the form resets.\n    // A component's responsibility is to restore to the initial state.\n    if (value === null) {\n      value = '';\n    } // If already initialized.\n\n\n    if (this.editorInstance) {\n      // The lock mechanism prevents from calling `cvaOnChange()` during changing\n      // the editor state. See #139\n      this.isEditorSettingData = true;\n      this.editorInstance.data.set(value);\n      this.isEditorSettingData = false;\n    } // If not, wait for it to be ready; store the data.\n    else {\n      // If the editor element is already available, then update its content.\n      this.data = value; // If not, then wait until it is ready\n      // and change data only for the first `ready` event.\n\n      this.ready.pipe(first()).subscribe(editor => {\n        editor.data.set(this.data);\n      });\n    }\n  } // Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\n\n  registerOnChange(callback) {\n    this.cvaOnChange = callback;\n  } // Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\n\n  registerOnTouched(callback) {\n    this.cvaOnTouched = callback;\n  } // Implementing the ControlValueAccessor interface (only when binding to ngModel).\n\n\n  setDisabledState(isDisabled) {\n    // If already initialized.\n    if (this.editorInstance) {\n      if (isDisabled) {\n        this.editorInstance.enableReadOnlyMode(ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID);\n      } else {\n        this.editorInstance.disableReadOnlyMode(ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID);\n      }\n    } // Store the state anyway to use it once the editor is created.\n\n\n    this.initiallyDisabled = isDisabled;\n  }\n  /**\r\n   * Creates the editor instance, sets initial editor data, then integrates\r\n   * the editor with the Angular component. This method does not use the `editor.data.set()`\r\n   * because of the issue in the collaboration mode (#6).\r\n   */\n\n\n  attachToWatchdog() {\n    // TODO: elementOrData parameter type can be simplified to HTMLElemen after templated Watchdog will be released.\n    const creator = (elementOrData, config) => {\n      return this.ngZone.runOutsideAngular(() => __awaiter(this, void 0, void 0, function* () {\n        this.elementRef.nativeElement.appendChild(elementOrData);\n        const editor = yield this.editor.create(elementOrData, config);\n\n        if (this.initiallyDisabled) {\n          editor.enableReadOnlyMode(ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID);\n        }\n\n        this.ngZone.run(() => {\n          this.ready.emit(editor);\n        });\n        this.setUpEditorEvents(editor);\n        return editor;\n      }));\n    };\n\n    const destructor = editor => __awaiter(this, void 0, void 0, function* () {\n      yield editor.destroy();\n      this.elementRef.nativeElement.removeChild(this.editorElement);\n    });\n\n    const emitError = e => {\n      // Do not run change detection by re-entering the Angular zone if the `error`\n      // emitter doesn't have any subscribers.\n      // Subscribers are pushed onto the list whenever `error` is listened inside the template:\n      // `<ckeditor (error)=\"onError(...)\"></ckeditor>`.\n      if (hasObservers(this.error)) {\n        this.ngZone.run(() => this.error.emit(e));\n      }\n    };\n\n    const element = document.createElement(this.tagName);\n    const config = this.getConfig();\n    this.editorElement = element; // Based on the presence of the watchdog decide how to initialize the editor.\n\n    if (this.watchdog) {\n      // When the context watchdog is passed add the new item to it based on the passed configuration.\n      this.watchdog.add({\n        id: this.id,\n        type: 'editor',\n        creator,\n        destructor,\n        sourceElementOrData: element,\n        config\n      }).catch(e => {\n        emitError(e);\n      });\n      this.watchdog.on('itemError', (_, {\n        itemId\n      }) => {\n        if (itemId === this.id) {\n          emitError();\n        }\n      });\n    } else {\n      // In the other case create the watchdog by hand to keep the editor running.\n      const editorWatchdog = new EditorWatchdog(this.editor, this.editorWatchdogConfig);\n      editorWatchdog.setCreator(creator);\n      editorWatchdog.setDestructor(destructor);\n      editorWatchdog.on('error', emitError);\n      this.editorWatchdog = editorWatchdog;\n      this.ngZone.runOutsideAngular(() => {\n        // Note: must be called outside of the Angular zone too because `create` is calling\n        // `_startErrorHandling` within a microtask which sets up `error` listener on the window.\n        editorWatchdog.create(element, config).catch(e => {\n          emitError(e);\n        });\n      });\n    }\n  }\n\n  getConfig() {\n    if (this.data && this.config.initialData) {\n      throw new Error('Editor data should be provided either using `config.initialData` or `data` properties.');\n    }\n\n    const config = Object.assign({}, this.config); // Merge two possible ways of providing data into the `config.initialData` field.\n\n    const initialData = this.config.initialData || this.data;\n\n    if (initialData) {\n      // Define the `config.initialData` only when the initial content is specified.\n      config.initialData = initialData;\n    }\n\n    return config;\n  }\n  /**\r\n   * Integrates the editor with the component by attaching related event listeners.\r\n   */\n\n\n  setUpEditorEvents(editor) {\n    const modelDocument = editor.model.document;\n    const viewDocument = editor.editing.view.document;\n    modelDocument.on('change:data', evt => {\n      this.ngZone.run(() => {\n        if (this.disableTwoWayDataBinding) {\n          return;\n        }\n\n        if (this.cvaOnChange && !this.isEditorSettingData) {\n          const data = editor.data.get();\n          this.cvaOnChange(data);\n        }\n\n        this.change.emit({\n          event: evt,\n          editor\n        });\n      });\n    });\n    viewDocument.on('focus', evt => {\n      this.ngZone.run(() => {\n        this.focus.emit({\n          event: evt,\n          editor\n        });\n      });\n    });\n    viewDocument.on('blur', evt => {\n      this.ngZone.run(() => {\n        if (this.cvaOnTouched) {\n          this.cvaOnTouched();\n        }\n\n        this.blur.emit({\n          event: evt,\n          editor\n        });\n      });\n    });\n  }\n\n}\n\nCKEditorComponent.ɵfac = function CKEditorComponent_Factory(t) {\n  return new (t || CKEditorComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.NgZone));\n};\n\nCKEditorComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CKEditorComponent,\n  selectors: [[\"ckeditor\"]],\n  inputs: {\n    editor: \"editor\",\n    config: \"config\",\n    data: \"data\",\n    tagName: \"tagName\",\n    watchdog: \"watchdog\",\n    editorWatchdogConfig: \"editorWatchdogConfig\",\n    disableTwoWayDataBinding: \"disableTwoWayDataBinding\",\n    disabled: \"disabled\"\n  },\n  outputs: {\n    ready: \"ready\",\n    change: \"change\",\n    blur: \"blur\",\n    focus: \"focus\",\n    error: \"error\"\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    useExisting: forwardRef(() => CKEditorComponent),\n    multi: true\n  }]), i0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 0,\n  template: function CKEditorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CKEditorComponent_ng_template_0_Template, 0, 0, \"ng-template\");\n    }\n  },\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CKEditorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ckeditor',\n      template: '<ng-template></ng-template>',\n      // Integration with @angular/forms.\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        useExisting: forwardRef(() => CKEditorComponent),\n        multi: true\n      }]\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.NgZone\n    }];\n  }, {\n    editor: [{\n      type: Input\n    }],\n    config: [{\n      type: Input\n    }],\n    data: [{\n      type: Input\n    }],\n    tagName: [{\n      type: Input\n    }],\n    watchdog: [{\n      type: Input\n    }],\n    editorWatchdogConfig: [{\n      type: Input\n    }],\n    disableTwoWayDataBinding: [{\n      type: Input\n    }],\n    disabled: [{\n      type: Input\n    }],\n    ready: [{\n      type: Output\n    }],\n    change: [{\n      type: Output\n    }],\n    blur: [{\n      type: Output\n    }],\n    focus: [{\n      type: Output\n    }],\n    error: [{\n      type: Output\n    }]\n  });\n})();\n\nfunction hasObservers(emitter) {\n  // Cast to `any` because `observed` property is available in RxJS >= 7.2.0.\n  // Fallback to checking `observers` list if this property is not defined.\n  return emitter.observed || emitter.observers.length > 0;\n}\n/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md.\r\n */\n\n\nclass CKEditorModule {}\n\nCKEditorModule.ɵfac = function CKEditorModule_Factory(t) {\n  return new (t || CKEditorModule)();\n};\n\nCKEditorModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: CKEditorModule\n});\nCKEditorModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[FormsModule, CommonModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CKEditorModule, [{\n    type: NgModule,\n    args: [{\n      imports: [FormsModule, CommonModule],\n      declarations: [CKEditorComponent],\n      exports: [CKEditorComponent]\n    }]\n  }], null, null);\n})();\n/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md.\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { CKEditorComponent, CKEditorModule };","map":{"version":3,"sources":["D:/UpWork/Max Dell-Thibodeau/exam_frontend/node_modules/@ckeditor/ckeditor5-angular/fesm2015/ckeditor-ckeditor5-angular.mjs"],"names":["__awaiter","i0","EventEmitter","forwardRef","Component","Input","Output","NgModule","EditorWatchdog","first","NG_VALUE_ACCESSOR","FormsModule","CommonModule","HEX_NUMBERS","Array","fill","map","val","index","toString","slice","uid","r1","Math","random","r2","r3","r4","ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID","CKEditorComponent","constructor","elementRef","ngZone","config","data","tagName","disableTwoWayDataBinding","ready","change","blur","focus","error","initiallyDisabled","isEditorSettingData","id","CKEDITOR_VERSION","window","major","split","Number","console","warn","disabled","isDisabled","setDisabledState","editorInstance","isReadOnly","editorWatchdog","watchdog","_watchdogs","get","editor","getId","ngOnChanges","changes","Object","prototype","hasOwnProperty","call","isFirstChange","writeValue","currentValue","ngAfterViewInit","attachToWatchdog","ngOnDestroy","remove","destroy","undefined","value","set","pipe","subscribe","registerOnChange","callback","cvaOnChange","registerOnTouched","cvaOnTouched","enableReadOnlyMode","disableReadOnlyMode","creator","elementOrData","runOutsideAngular","nativeElement","appendChild","create","run","emit","setUpEditorEvents","destructor","removeChild","editorElement","emitError","e","hasObservers","element","document","createElement","getConfig","add","type","sourceElementOrData","catch","on","_","itemId","editorWatchdogConfig","setCreator","setDestructor","initialData","Error","assign","modelDocument","model","viewDocument","editing","view","evt","event","ɵfac","ElementRef","NgZone","ɵcmp","provide","useExisting","multi","args","selector","template","providers","emitter","observed","observers","length","CKEditorModule","ɵmod","ɵinj","imports","declarations","exports"],"mappings":"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","sourcesContent":["import { __awaiter } from 'tslib';\r\nimport * as i0 from '@angular/core';\r\nimport { EventEmitter, forwardRef, Component, Input, Output, NgModule } from '@angular/core';\r\nimport { EditorWatchdog } from '@ckeditor/ckeditor5-watchdog';\r\nimport { first } from 'rxjs/operators';\r\nimport { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md.\r\n */\r\n// A copy of @ckeditor/ckeditor5-utils/src/uid.js\r\n// A hash table of hex numbers to avoid using toString() in uid() which is costly.\r\n// [ '00', '01', '02', ..., 'fe', 'ff' ]\r\nconst HEX_NUMBERS = new Array(256).fill(0)\r\n    .map((val, index) => ('0' + (index).toString(16)).slice(-2));\r\n/**\r\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\r\n * 32 alphanumeric characters.\r\n *\r\n * **Note**: The characters the unique id is built from correspond to the hex number notation\r\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\r\n * by 16 8-bit numbers next to each other.\r\n *\r\n * @returns An unique id string.\r\n */\r\nfunction uid() {\r\n    // Let's create some positive random 32bit integers first.\r\n    //\r\n    // 1. Math.random() is a float between 0 and 1.\r\n    // 2. 0x100000000 is 2^32 = 4294967296.\r\n    // 3. >>> 0 enforces integer (in JS all numbers are floating point).\r\n    //\r\n    // For instance:\r\n    //\t\tMath.random() * 0x100000000 = 3366450031.853859\r\n    // but\r\n    //\t\tMath.random() * 0x100000000 >>> 0 = 3366450031.\r\n    const r1 = Math.random() * 0x100000000 >>> 0;\r\n    const r2 = Math.random() * 0x100000000 >>> 0;\r\n    const r3 = Math.random() * 0x100000000 >>> 0;\r\n    const r4 = Math.random() * 0x100000000 >>> 0;\r\n    // Make sure that id does not start with number.\r\n    return 'e' +\r\n        HEX_NUMBERS[r1 >> 0 & 0xFF] +\r\n        HEX_NUMBERS[r1 >> 8 & 0xFF] +\r\n        HEX_NUMBERS[r1 >> 16 & 0xFF] +\r\n        HEX_NUMBERS[r1 >> 24 & 0xFF] +\r\n        HEX_NUMBERS[r2 >> 0 & 0xFF] +\r\n        HEX_NUMBERS[r2 >> 8 & 0xFF] +\r\n        HEX_NUMBERS[r2 >> 16 & 0xFF] +\r\n        HEX_NUMBERS[r2 >> 24 & 0xFF] +\r\n        HEX_NUMBERS[r3 >> 0 & 0xFF] +\r\n        HEX_NUMBERS[r3 >> 8 & 0xFF] +\r\n        HEX_NUMBERS[r3 >> 16 & 0xFF] +\r\n        HEX_NUMBERS[r3 >> 24 & 0xFF] +\r\n        HEX_NUMBERS[r4 >> 0 & 0xFF] +\r\n        HEX_NUMBERS[r4 >> 8 & 0xFF] +\r\n        HEX_NUMBERS[r4 >> 16 & 0xFF] +\r\n        HEX_NUMBERS[r4 >> 24 & 0xFF];\r\n}\r\n\r\nconst ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID = 'Lock from Angular integration (@ckeditor/ckeditor5-angular)';\r\nclass CKEditorComponent {\r\n    constructor(elementRef, ngZone) {\r\n        /**\r\n         * The configuration of the editor.\r\n         * See https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editorconfig-EditorConfig.html\r\n         * to learn more.\r\n         */\r\n        this.config = {};\r\n        /**\r\n         * The initial data of the editor. Useful when not using the ngModel.\r\n         * See https://angular.io/api/forms/NgModel to learn more.\r\n         */\r\n        this.data = '';\r\n        /**\r\n         * Tag name of the editor component.\r\n         *\r\n         * The default tag is 'div'.\r\n         */\r\n        this.tagName = 'div';\r\n        /**\r\n         * Allows disabling the two-way data binding mechanism. Disabling it can boost performance for large documents.\r\n         *\r\n         * When a component is connected using the [(ngModel)] or [formControl] directives and this value is set to true then none of the data\r\n         * will ever be synchronized.\r\n         *\r\n         * An integrator must call `editor.data.get()` manually once the application needs the editor's data.\r\n         * An editor instance can be received in the `ready()` callback.\r\n         */\r\n        this.disableTwoWayDataBinding = false;\r\n        /**\r\n         * Fires when the editor is ready. It corresponds with the `editor#ready`\r\n         * https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html#event-ready\r\n         * event.\r\n         */\r\n        this.ready = new EventEmitter();\r\n        /**\r\n         * Fires when the content of the editor has changed. It corresponds with the `editor.model.document#change`\r\n         * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_model_document-Document.html#event-change\r\n         * event.\r\n         */\r\n        this.change = new EventEmitter();\r\n        /**\r\n         * Fires when the editing view of the editor is blurred. It corresponds with the `editor.editing.view.document#blur`\r\n         * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_document-Document.html#event-event:blur\r\n         * event.\r\n         */\r\n        this.blur = new EventEmitter();\r\n        /**\r\n         * Fires when the editing view of the editor is focused. It corresponds with the `editor.editing.view.document#focus`\r\n         * https://ckeditor.com/docs/ckeditor5/latest/api/module_engine_view_document-Document.html#event-event:focus\r\n         * event.\r\n         */\r\n        this.focus = new EventEmitter();\r\n        /**\r\n         * Fires when the editor component crashes.\r\n         */\r\n        this.error = new EventEmitter();\r\n        /**\r\n         * If the component is read–only before the editor instance is created, it remembers that state,\r\n         * so the editor can become read–only once it is ready.\r\n         */\r\n        this.initiallyDisabled = false;\r\n        /**\r\n         * A lock flag preventing from calling the `cvaOnChange()` during setting editor data.\r\n         */\r\n        this.isEditorSettingData = false;\r\n        this.id = uid();\r\n        this.ngZone = ngZone;\r\n        this.elementRef = elementRef;\r\n        // To avoid issues with the community typings and CKEditor 5, let's treat window as any. See #342.\r\n        const { CKEDITOR_VERSION } = window;\r\n        if (CKEDITOR_VERSION) {\r\n            const [major] = CKEDITOR_VERSION.split('.').map(Number);\r\n            if (major < 37) {\r\n                console.warn('The <CKEditor> component requires using CKEditor 5 in version 37 or higher.');\r\n            }\r\n        }\r\n        else {\r\n            console.warn('Cannot find the \"CKEDITOR_VERSION\" in the \"window\" scope.');\r\n        }\r\n    }\r\n    /**\r\n     * When set `true`, the editor becomes read-only.\r\n     * See https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html#member-isReadOnly\r\n     * to learn more.\r\n     */\r\n    set disabled(isDisabled) {\r\n        this.setDisabledState(isDisabled);\r\n    }\r\n    get disabled() {\r\n        if (this.editorInstance) {\r\n            return this.editorInstance.isReadOnly;\r\n        }\r\n        return this.initiallyDisabled;\r\n    }\r\n    /**\r\n     * The instance of the editor created by this component.\r\n     */\r\n    get editorInstance() {\r\n        let editorWatchdog = this.editorWatchdog;\r\n        if (this.watchdog) {\r\n            // Temporarily use the `_watchdogs` internal map as the `getItem()` method throws\r\n            // an error when the item is not registered yet.\r\n            // See https://github.com/ckeditor/ckeditor5-angular/issues/177.\r\n            // TODO should be able to change when new chages in Watcdog are released.\r\n            editorWatchdog = this.watchdog._watchdogs.get(this.id);\r\n        }\r\n        if (editorWatchdog) {\r\n            return editorWatchdog.editor;\r\n        }\r\n        return null;\r\n    }\r\n    getId() {\r\n        return this.id;\r\n    }\r\n    // Implementing the OnChanges interface. Whenever the `data` property is changed, update the editor content.\r\n    ngOnChanges(changes) {\r\n        if (Object.prototype.hasOwnProperty.call(changes, 'data') && changes.data && !changes.data.isFirstChange()) {\r\n            this.writeValue(changes.data.currentValue);\r\n        }\r\n    }\r\n    // Implementing the AfterViewInit interface.\r\n    ngAfterViewInit() {\r\n        this.attachToWatchdog();\r\n    }\r\n    // Implementing the OnDestroy interface.\r\n    ngOnDestroy() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.watchdog) {\r\n                yield this.watchdog.remove(this.id);\r\n            }\r\n            else if (this.editorWatchdog && this.editorWatchdog.editor) {\r\n                yield this.editorWatchdog.destroy();\r\n                this.editorWatchdog = undefined;\r\n            }\r\n        });\r\n    }\r\n    // Implementing the ControlValueAccessor interface (only when binding to ngModel).\r\n    writeValue(value) {\r\n        // This method is called with the `null` value when the form resets.\r\n        // A component's responsibility is to restore to the initial state.\r\n        if (value === null) {\r\n            value = '';\r\n        }\r\n        // If already initialized.\r\n        if (this.editorInstance) {\r\n            // The lock mechanism prevents from calling `cvaOnChange()` during changing\r\n            // the editor state. See #139\r\n            this.isEditorSettingData = true;\r\n            this.editorInstance.data.set(value);\r\n            this.isEditorSettingData = false;\r\n        }\r\n        // If not, wait for it to be ready; store the data.\r\n        else {\r\n            // If the editor element is already available, then update its content.\r\n            this.data = value;\r\n            // If not, then wait until it is ready\r\n            // and change data only for the first `ready` event.\r\n            this.ready\r\n                .pipe(first())\r\n                .subscribe(editor => {\r\n                editor.data.set(this.data);\r\n            });\r\n        }\r\n    }\r\n    // Implementing the ControlValueAccessor interface (only when binding to ngModel).\r\n    registerOnChange(callback) {\r\n        this.cvaOnChange = callback;\r\n    }\r\n    // Implementing the ControlValueAccessor interface (only when binding to ngModel).\r\n    registerOnTouched(callback) {\r\n        this.cvaOnTouched = callback;\r\n    }\r\n    // Implementing the ControlValueAccessor interface (only when binding to ngModel).\r\n    setDisabledState(isDisabled) {\r\n        // If already initialized.\r\n        if (this.editorInstance) {\r\n            if (isDisabled) {\r\n                this.editorInstance.enableReadOnlyMode(ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID);\r\n            }\r\n            else {\r\n                this.editorInstance.disableReadOnlyMode(ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID);\r\n            }\r\n        }\r\n        // Store the state anyway to use it once the editor is created.\r\n        this.initiallyDisabled = isDisabled;\r\n    }\r\n    /**\r\n     * Creates the editor instance, sets initial editor data, then integrates\r\n     * the editor with the Angular component. This method does not use the `editor.data.set()`\r\n     * because of the issue in the collaboration mode (#6).\r\n     */\r\n    attachToWatchdog() {\r\n        // TODO: elementOrData parameter type can be simplified to HTMLElemen after templated Watchdog will be released.\r\n        const creator = ((elementOrData, config) => {\r\n            return this.ngZone.runOutsideAngular(() => __awaiter(this, void 0, void 0, function* () {\r\n                this.elementRef.nativeElement.appendChild(elementOrData);\r\n                const editor = yield this.editor.create(elementOrData, config);\r\n                if (this.initiallyDisabled) {\r\n                    editor.enableReadOnlyMode(ANGULAR_INTEGRATION_READ_ONLY_LOCK_ID);\r\n                }\r\n                this.ngZone.run(() => {\r\n                    this.ready.emit(editor);\r\n                });\r\n                this.setUpEditorEvents(editor);\r\n                return editor;\r\n            }));\r\n        });\r\n        const destructor = (editor) => __awaiter(this, void 0, void 0, function* () {\r\n            yield editor.destroy();\r\n            this.elementRef.nativeElement.removeChild(this.editorElement);\r\n        });\r\n        const emitError = (e) => {\r\n            // Do not run change detection by re-entering the Angular zone if the `error`\r\n            // emitter doesn't have any subscribers.\r\n            // Subscribers are pushed onto the list whenever `error` is listened inside the template:\r\n            // `<ckeditor (error)=\"onError(...)\"></ckeditor>`.\r\n            if (hasObservers(this.error)) {\r\n                this.ngZone.run(() => this.error.emit(e));\r\n            }\r\n        };\r\n        const element = document.createElement(this.tagName);\r\n        const config = this.getConfig();\r\n        this.editorElement = element;\r\n        // Based on the presence of the watchdog decide how to initialize the editor.\r\n        if (this.watchdog) {\r\n            // When the context watchdog is passed add the new item to it based on the passed configuration.\r\n            this.watchdog.add({\r\n                id: this.id,\r\n                type: 'editor',\r\n                creator,\r\n                destructor,\r\n                sourceElementOrData: element,\r\n                config\r\n            }).catch(e => {\r\n                emitError(e);\r\n            });\r\n            this.watchdog.on('itemError', (_, { itemId }) => {\r\n                if (itemId === this.id) {\r\n                    emitError();\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            // In the other case create the watchdog by hand to keep the editor running.\r\n            const editorWatchdog = new EditorWatchdog(this.editor, this.editorWatchdogConfig);\r\n            editorWatchdog.setCreator(creator);\r\n            editorWatchdog.setDestructor(destructor);\r\n            editorWatchdog.on('error', emitError);\r\n            this.editorWatchdog = editorWatchdog;\r\n            this.ngZone.runOutsideAngular(() => {\r\n                // Note: must be called outside of the Angular zone too because `create` is calling\r\n                // `_startErrorHandling` within a microtask which sets up `error` listener on the window.\r\n                editorWatchdog.create(element, config).catch(e => {\r\n                    emitError(e);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    getConfig() {\r\n        if (this.data && this.config.initialData) {\r\n            throw new Error('Editor data should be provided either using `config.initialData` or `data` properties.');\r\n        }\r\n        const config = Object.assign({}, this.config);\r\n        // Merge two possible ways of providing data into the `config.initialData` field.\r\n        const initialData = this.config.initialData || this.data;\r\n        if (initialData) {\r\n            // Define the `config.initialData` only when the initial content is specified.\r\n            config.initialData = initialData;\r\n        }\r\n        return config;\r\n    }\r\n    /**\r\n     * Integrates the editor with the component by attaching related event listeners.\r\n     */\r\n    setUpEditorEvents(editor) {\r\n        const modelDocument = editor.model.document;\r\n        const viewDocument = editor.editing.view.document;\r\n        modelDocument.on('change:data', evt => {\r\n            this.ngZone.run(() => {\r\n                if (this.disableTwoWayDataBinding) {\r\n                    return;\r\n                }\r\n                if (this.cvaOnChange && !this.isEditorSettingData) {\r\n                    const data = editor.data.get();\r\n                    this.cvaOnChange(data);\r\n                }\r\n                this.change.emit({ event: evt, editor });\r\n            });\r\n        });\r\n        viewDocument.on('focus', evt => {\r\n            this.ngZone.run(() => {\r\n                this.focus.emit({ event: evt, editor });\r\n            });\r\n        });\r\n        viewDocument.on('blur', evt => {\r\n            this.ngZone.run(() => {\r\n                if (this.cvaOnTouched) {\r\n                    this.cvaOnTouched();\r\n                }\r\n                this.blur.emit({ event: evt, editor });\r\n            });\r\n        });\r\n    }\r\n}\r\nCKEditorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.4.0\", ngImport: i0, type: CKEditorComponent, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });\r\nCKEditorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.4.0\", type: CKEditorComponent, selector: \"ckeditor\", inputs: { editor: \"editor\", config: \"config\", data: \"data\", tagName: \"tagName\", watchdog: \"watchdog\", editorWatchdogConfig: \"editorWatchdogConfig\", disableTwoWayDataBinding: \"disableTwoWayDataBinding\", disabled: \"disabled\" }, outputs: { ready: \"ready\", change: \"change\", blur: \"blur\", focus: \"focus\", error: \"error\" }, providers: [\r\n        {\r\n            provide: NG_VALUE_ACCESSOR,\r\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n            useExisting: forwardRef(() => CKEditorComponent),\r\n            multi: true\r\n        }\r\n    ], usesOnChanges: true, ngImport: i0, template: '<ng-template></ng-template>', isInline: true });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.4.0\", ngImport: i0, type: CKEditorComponent, decorators: [{\r\n            type: Component,\r\n            args: [{\r\n                    selector: 'ckeditor',\r\n                    template: '<ng-template></ng-template>',\r\n                    // Integration with @angular/forms.\r\n                    providers: [\r\n                        {\r\n                            provide: NG_VALUE_ACCESSOR,\r\n                            // eslint-disable-next-line @typescript-eslint/no-use-before-define\r\n                            useExisting: forwardRef(() => CKEditorComponent),\r\n                            multi: true\r\n                        }\r\n                    ]\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }]; }, propDecorators: { editor: [{\r\n                type: Input\r\n            }], config: [{\r\n                type: Input\r\n            }], data: [{\r\n                type: Input\r\n            }], tagName: [{\r\n                type: Input\r\n            }], watchdog: [{\r\n                type: Input\r\n            }], editorWatchdogConfig: [{\r\n                type: Input\r\n            }], disableTwoWayDataBinding: [{\r\n                type: Input\r\n            }], disabled: [{\r\n                type: Input\r\n            }], ready: [{\r\n                type: Output\r\n            }], change: [{\r\n                type: Output\r\n            }], blur: [{\r\n                type: Output\r\n            }], focus: [{\r\n                type: Output\r\n            }], error: [{\r\n                type: Output\r\n            }] } });\r\nfunction hasObservers(emitter) {\r\n    // Cast to `any` because `observed` property is available in RxJS >= 7.2.0.\r\n    // Fallback to checking `observers` list if this property is not defined.\r\n    return emitter.observed || emitter.observers.length > 0;\r\n}\r\n\r\n/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md.\r\n */\r\nclass CKEditorModule {\r\n}\r\nCKEditorModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.4.0\", ngImport: i0, type: CKEditorModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nCKEditorModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.4.0\", ngImport: i0, type: CKEditorModule, declarations: [CKEditorComponent], imports: [FormsModule, CommonModule], exports: [CKEditorComponent] });\r\nCKEditorModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.4.0\", ngImport: i0, type: CKEditorModule, imports: [[FormsModule, CommonModule]] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.4.0\", ngImport: i0, type: CKEditorModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    imports: [FormsModule, CommonModule],\r\n                    declarations: [CKEditorComponent],\r\n                    exports: [CKEditorComponent]\r\n                }]\r\n        }] });\r\n\r\n/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md.\r\n */\r\n\r\n/**\r\n * Generated bundle index. Do not edit.\r\n */\r\n\r\nexport { CKEditorComponent, CKEditorModule };\r\n\n"]},"metadata":{},"sourceType":"module"}